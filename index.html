a<script>
document.write('<script src="https://api.allorigins.win/raw?url=https://gist.github.com/'+new URLSearchParams(location.search).get('id')+'.js"><\/script>');
window.addEventListener('load',()=>{
  Array.prototype.forEach.call(document.querySelectorAll('.gist-file'),async(play)=>{
    if (play.querySelector('.gist-meta a:nth-child(2)').innerText.endsWith('.html ')) {
      var frame = document.createElement('iframe');
      frame.srcdoc = await fetch('https://api.allorigins.win/raw?url=https://gist.github.com/'+new URLSearchParams(location.search).get('user')+'/'+new URLSearchParams(location.search).get('id')+'/raw/'+(play.querySelector('.gist-meta a:nth-child(2)').innerText.trim())).then(r=>r.text());
      frame.style.border = 'none';
      frame.style.width = '100%';
      play.querySelector('.gist-data .file .data').appendChild(frame);
      frame.contentWindow.addEventListener('resize',()=>frame.style.height = frame.contentWindow.document.body.clientHeight + 'px')
      frame.contentWindow.addEventListener('DOMContentLoaded',()=>frame.style.height = frame.contentWindow.document.body.clientHeight + 'px')
    }
    var collapse = document.createElement("a");
    collapse.href = "javascript:undefined;"
    collapse.onclick = ()=>{
      play.querySelector('.gist-data').style.display = play.querySelector('.gist-data').style.display ? '' : 'none';
    }
    collapse.innerText = 'collapse';
    collapse.style.marginRight = '5px';
    collapse.style.float = 'right';
    play.querySelector('.gist-meta').appendChild(collapse);
  });
});
</script>
<style>
.gist-file {
  border-radius: 0 !important;
  border: none !important;
  margin: 0 !important;
}
.gist-meta {
  border-radius: 0 !important;
  border-bottom: 1px solid #eee !important;
}
body {
  margin: 0;
}
</style>
<script>
Array.prototype.forEach.call(document.querySelectorAll('.gist-file'),elem=>{
  elem.appendChild(elem.querySelector('.gist-data'));
});
</script>
